<!DOCTYPE html>
<html>
<head>
  <title>Ghost Detection Input</title>
</head>
<body>
  <h2>Ghost Detection Input Form</h2>
  <form id="predict-form">
    <label>User ID: <input name="user_id" required></label><br>
    <label>Device OS: <input name="device_os" value="Windows"></label><br>
    <label>Login Hour: <input name="login_hour" type="number"></label><br>
    <label>Typing Speed (CPM): <input name="typing_speed_cpm" type="number"></label><br>
    <label>Nav Path: <input name="nav_path" value="login>transfer"></label><br>
    <label>Nav Path Depth: <input name="nav_path_depth" type="number"></label><br>
    <label>IP Country: <input name="ip_country" value="MY"></label><br>
    <label>Session Duration (s): <input name="session_duration_sec" type="number"></label><br>
    <label>Mouse Movement Rate: <input name="mouse_movement_rate" type="number"></label><br>
    <label>Device ID: <input name="device_id" value="dev001"></label><br>
    <label>IP Consistency Score: <input name="ip_consistency_score" type="number" step="0.01"></label><br>
    <label>Login Day of Week: <input name="login_day_of_week" value="Monday"></label><br>
    <label>Geo Distance from Usual: <input name="geo_distance_from_usual" type="number"></label><br>
    <label>Browser Language: <input name="browser_language" value="en-US"></label><br>
    <label>Failed Login Attempts (24h): <input name="failed_login_attempts_last_24h" type="number"></label><br>
    <label>VPN Detected? <input name="is_vpn_detected" type="number" min="0" max="1"></label><br>
    <label>Recent Device Change? <input name="recent_device_change" type="number" min="0" max="1"></label><br>
    <button type="submit">Submit</button>
  </form>

  <pre id="output"></pre>

  <script>
    document.getElementById('predict-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());

      for (const key in data) {
        if (!isNaN(data[key])) data[key] = Number(data[key]);
      }

      const payload = {
        sessions: [data]  // ðŸ‘ˆ wrap in "sessions" as required by backend
      };

      const res = await fetch('http://127.0.0.1:8000/predict', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      const result = await res.json();
      document.getElementById('output').textContent = JSON.stringify(result, null, 2);
    });
  </script>
</body>
</html>
